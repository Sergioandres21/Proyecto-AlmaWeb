Proyecto AlmaWeb, fase dise√±o, Sena 2021.
Ficha 2170338.

Script de la base de datos mysql.

CREATE DATABASE AlmaWeb;

CREATE TABLE ROLES (
  IdRol INT NOT NULL,
  Nombre VARCHAR(40) NOT NULL,
  Descripcion VARCHAR(254) NOT NULL,
  Estado BIT NOT NULL,
  PRIMARY KEY (IdRol))


CREATE TABLE DEPARTAMENTOS (
  IdDepartamento INT NOT NULL,
  Nombre VARCHAR(30) NOT NULL,
  PRIMARY KEY (IdDepartamento));


CREATE TABLE MUNICIPIOS (
  IdMunicipio INT NOT NULL,
  IdDepartamento INT NOT NULL,
  Nombre VARCHAR(35) NOT NULL,
  PRIMARY KEY (IdMunicipio),
  INDEX fk_MUNICIPIOS_DEPARTAMENTOS1_idx (IdDepartamento ASC), 
  CONSTRAINT fk_MUNICIPIOS_DEPARTAMENTOS1
    FOREIGN KEY (IdDepartamento)
    REFERENCES DEPARTAMENTOS (IdDepartamento)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);


CREATE TABLE PROVEEDORES (
  NumeroDeIdentificacion INT NOT NULL,
  IdRol INT NOT NULL,
  IdMunicipio INT NOT NULL,
  TipoDeDocumento VARCHAR(2) NOT NULL,
  Nombres VARCHAR(45) NOT NULL,
  Apellidos VARCHAR(40) NOT NULL,
  Email VARCHAR(45) NOT NULL UNIQUE,
  Telefono VARCHAR(20) NULL UNIQUE,
  Celular VARCHAR(15) NOT NULL UNIQUE,
  DireccionResidencia VARCHAR(55) NULL,
  Estado BIT NOT NULL,
  PRIMARY KEY (NumeroDeIdentificacion),
  INDEX fk_PROVEEDORES_Roles1_idx (IdRol ASC),
  INDEX fk_PROVEEDORES_MUNICIPIOS1_idx (IdMunicipio ASC),
  CONSTRAINT fk_PROVEEDORES_Roles1
    FOREIGN KEY (IdRol)
    REFERENCES ROLES (IdRol)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT fk_PROVEEDORES_MUNICIPIOS1
    FOREIGN KEY (IdMunicipio)
    REFERENCES MUNICIPIOS (IdMunicipio)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

  
CREATE TABLE UNIDAD_DE_MEDIDA (
  IdUnidadMedida INT NOT NULL,
  NombreUnidadMedida VARCHAR(25) NOT NULL,
  ValorUnidadMedida INT NOT NULL,
  PRIMARY KEY (IdUnidadMedida));


CREATE TABLE TIPO_PRODUCTO (
  IdTipoProducto INT NOT NULL,
  NombreTipoProducto VARCHAR(35) NOT NULL,
  PRIMARY KEY (IdTipoProducto));


 CREATE TABLE MARCA_PRODUCTOS (
  IdMarcaProducto INT NOT NULL,
  NombreMarca VARCHAR(45) NOT NULL,
  PRIMARY KEY (IdMarcaProducto));


CREATE TABLE TARIFA_PRODUCTO (
  IdTarifaProducto INT NOT NULL,
  AnoTarifa DATE NOT NULL,
  Resolucion VARCHAR(50) NOT NULL,
  PRIMARY KEY (IdTarifaProducto));

 CREATE TABLE TARIFA_SERVICIO (
  IdTarifaServicio INT NOT NULL,
  AnoTarifa DATE NOT NULL,
  Resolucion VARCHAR(50) NOT NULL,
  PRIMARY KEY (IdTarifaServicio));


CREATE TABLE PRODUCTOS (
  IdProductos INT AUTO_INCREMENT NOT NULL,
  PROVEEDORES_NumeroDeIdentificacion INT NOT NULL,
  IdUnidadMedida INT NOT NULL,
  IdTipoProducto INT NOT NULL,
  IdMarcaProducto INT NOT NULL,
  IdTarifaProducto INT NOT NULL,
  Nombre VARCHAR(60) NOT NULL,
  Precio FLOAT NOT NULL,
  Existencia INT NOT NULL,
  Descripcion VARCHAR(200) NOT NULL,
  Estado BIT NOT NULL,
  PRIMARY KEY (IdProductos),
  INDEX fk_PRODUCTOS_PROVEEDORES1_idx (PROVEEDORES_NumeroDeIdentificacion ASC) ,
  INDEX fk_PRODUCTOS_UNIDAD_DE_MEDIDA1_idx (IdUnidadMedida ASC),
  INDEX fk_PRODUCTOS_TIPO_PRODUCTO1_idx (IdTipoProducto ASC),
  INDEX fk_PRODUCTOS_MARCA_PRODUCTOS1_idx (IdMarcaProducto ASC),
  CONSTRAINT fk_PRODUCTOS_PROVEEDORES1
    FOREIGN KEY (PROVEEDORES_NumeroDeIdentificacion)
    REFERENCES PROVEEDORES (NumeroDeIdentificacion)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT fk_PRODUCTOS_UNIDAD_DE_MEDIDA1
    FOREIGN KEY (IdUnidadMedida)
    REFERENCES UNIDAD_DE_MEDIDA (IdUnidadMedida)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT fk_PRODUCTOS_TIPO_PRODUCTO1
    FOREIGN KEY (IdTipoProducto)
    REFERENCES TIPO_PRODUCTO (IdTipoProducto)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT fk_PRODUCTOS_MARCA_PRODUCTOS1
    FOREIGN KEY (IdMarcaProducto)
    REFERENCES MARCA_PRODUCTOS (IdMarcaProducto)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
CONSTRAINT fk_PRODUCTOS_TARIFA_PRODUCTO
    FOREIGN KEY (IdTarifaProducto)
    REFERENCES TARIFA_PRODUCTO (IdTarifaProducto)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

CREATE TABLE USUARIOS (
  IdUsuario INT NOT NULL,
  IdRol INT NOT NULL,
  Email VARCHAR(45) NOT NULL UNIQUE,
  Contrasena VARCHAR(55) NOT NULL UNIQUE,
  ImagenUsuario BINARY(11) NULL,
  Celular INT NOT NULL UNIQUE,
  Estado BIT NOT NULL,
  PRIMARY KEY (IdUsuario),
  INDEX fk_USUARIOS_Roles1_idx (IdRol ASC),
  CONSTRAINT fk_USUARIOS_Roles1
    FOREIGN KEY (IdRol)
    REFERENCES ROLES (IdRol)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);


CREATE TABLE CLIENTES (
  NumeroIdentificacion INT NOT NULL,
  IdUsuario INT NOT NULL,
  IdMunicipio INT NOT NULL,
  Nombre VARCHAR(45) NOT NULL,
  Apellidos VARCHAR(40) NOT NULL,
  TipoDeDocumento VARCHAR(2) NOT NULL,
  Email VARCHAR(45) NOT NULL UNIQUE,
  Telefono VARCHAR(20) NULL,
  Celular VARCHAR(15) NOT NULL UNIQUE,
  DireccionResidencia VARCHAR(55) NULL,
  Estado BIT NOT NULL,
  PRIMARY KEY (NumeroIdentificacion),
  INDEX fk_CLIENTE_USUARIOS1_idx (IdUsuario ASC),
  INDEX fk_CLIENTES_MUNICIPIOS1_idx (IdMunicipio ASC),
  CONSTRAINT fk_CLIENTE_USUARIOS1
    FOREIGN KEY (IdUsuario)
    REFERENCES USUARIOS (IdUsuario)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT fk_CLIENTES_MUNICIPIOS1
    FOREIGN KEY (IdMunicipio)
    REFERENCES MUNICIPIOS (IdMunicipio)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);


CREATE TABLE ESTADO_PEDIDOS (
  IdEstadoPedido INT NOT NULL,
  NombreEstado VARCHAR(45) NOT NULL,
  PRIMARY KEY (IdEstadoPedido));


CREATE TABLE PEDIDOS (
  idPedidos INT AUTO_INCREMENT NOT NULL,
  NumeroIdentificacionCliente INT NOT NULL,
  IdEstadoPedido INT NOT NULL,
  Fecha DATE NOT NULL,
  PRIMARY KEY (idPedidos),
  INDEX fk_Pedidos_CLIENTE1_idx (NumeroIdentificacionCliente ASC),
  INDEX fk_PEDIDOS_ESTADOPEDIDOS1_idx (IdEstadoPedido ASC),
  CONSTRAINT fk_Pedidos_CLIENTE1
    FOREIGN KEY (NumeroIdentificacionCliente)
    REFERENCES CLIENTES (NumeroIdentificacion)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT fk_PEDIDOS_ESTADOPEDIDOS1
    FOREIGN KEY (IdEstadoPedido)
    REFERENCES ESTADO_PEDIDOS (IdEstadoPedido)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);


CREATE TABLE DETALLE_PEDIDOS (
  IdDetallePedido INT NOT NULL,
  IdProductos INT NOT NULL,
  IdPedidos INT NOT NULL,
  Cantidad INT NOT NULL,
  Subtotal FLOAT NOT NULL,
  INDEX fk_PRODUCTOS_has_Pedidos_Pedidos1_idx (IdPedidos ASC),
  INDEX fk_PRODUCTOS_has_Pedidos_PRODUCTOS1_idx (IdProductos ASC),
  PRIMARY KEY (IdDetallePedido),
  CONSTRAINT fk_PRODUCTOS_has_Pedidos_PRODUCTOS1
    FOREIGN KEY (IdProductos)
    REFERENCES PRODUCTOS (IdProductos)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT fk_PRODUCTOS_has_Pedidos_Pedidos1
    FOREIGN KEY (IdPedidos)
    REFERENCES PEDIDOS (idPedidos)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);



CREATE TABLE PERMISOS (
  IdPermiso INT NOT NULL,
  Descripcion VARCHAR(150) NOT NULL,
  PRIMARY KEY (IdPermiso));



CREATE TABLE TIPO_SERVICIOS (
  IdTipoServicio INT NOT NULL,
  NombreTipoServicio VARCHAR(45) NOT NULL,
  PRIMARY KEY (IdTipoServicio));



CREATE TABLE PROFESIONALES (
  NumeroIdentificacion INT NOT NULL,
  IdMunicipio INT NOT NULL,
  IdRol INT NOT NULL,
  TipoDocumento VARCHAR(2) NOT NULL,
  Nombre VARCHAR(45) NOT NULL,
  Apellidos VARCHAR(40) NOT NULL,
  Email VARCHAR(50) NOT NULL UNIQUE,
  Celular VARCHAR(15) NOT NULL UNIQUE,
  DireccionResidencia VARCHAR(55) NULL,
  Estado BIT NOT NULL,
  PRIMARY KEY (NumeroIdentificacion),
  INDEX fk_PROFESIONALES_MUNICIPIOS1_idx (IdMunicipio ASC),
  INDEX fk_PROVEEDORES_Roles1_idx (IdRol ASC),
  CONSTRAINT fk_PROFESIONALES_MUNICIPIOS1
    FOREIGN KEY (IdMunicipio)
    REFERENCES MUNICIPIOS (IdMunicipio)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
	CONSTRAINT fk_PROFESIONALES_ROLES1
	FOREIGN KEY (IdRol)
    REFERENCES ROLES (IdRol)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

CREATE TABLE SERVICIOS (
  IdServicio INT AUTO_INCREMENT  NOT NULL,
  IdTipoServicio INT NOT NULL,
  NumeroIdentificacionProfesional INT NOT NULL,
  IdTarifaServicio INT NOT NULL,
  Nombre VARCHAR(60) NOT NULL UNIQUE,
  Precio FLOAT NOT NULL,
  Descripcion VARCHAR(200) NOT NULL,
  TiempoDuracion TIME NOT NULL,
  Estado BIT NOT NULL,
  PRIMARY KEY (IdServicio),
  INDEX fk_SERVICIOS_TIPO_SERVICIOS1_idx (IdTipoServicio ASC),
  INDEX fk_SERVICIOS_PROFESIONALES1_idx (NumeroIdentificacionProfesional ASC),
  CONSTRAINT fk_SERVICIOS_TIPO_SERVICIOS1
    FOREIGN KEY (IdTipoServicio)
    REFERENCES TIPO_SERVICIOS (IdTipoServicio)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT fk_SERVICIOS_PROFESIONALES1
    FOREIGN KEY (NumeroIdentificacionProfesional)
    REFERENCES PROFESIONALES (NumeroIdentificacion)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
 CONSTRAINT fk_SERVICIOS_TARIFAS1
    FOREIGN KEY (IdTarifaServicio)
    REFERENCES TARIFA_SERVICIO (IdTarifaServicio)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);



CREATE TABLE ESTADO_AGENDA (
  IDEstadoAgenda INT NOT NULL,
  NombreEstado VARCHAR(45) NOT NULL,
  PRIMARY KEY (IDEstadoAgenda));




CREATE TABLE CENTRO_DE_ESTETICA (
  RazonSocial VARCHAR(35) NOT NULL,
  IdMunicipio INT NOT NULL,
  Direccion VARCHAR(55) NOT NULL,
  PRIMARY KEY (RazonSocial),
  INDEX fk_CENTRO_DE_ESTETICA_MUNICIPIOS1_idx (IdMunicipio ASC),
  CONSTRAINT fk_CENTRO_DE_ESTETICA_MUNICIPIOS1
    FOREIGN KEY (IdMunicipio)
    REFERENCES MUNICIPIOS (IdMunicipio)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);



CREATE TABLE BOLETAS_DE_PAGO (
  IdBoletaPago INT NOT NULL,
  idPedido INT NOT NULL,
  NumeroIdentificacionCosmetologa INT NOT NULL,
  Cliente_NumeroIdentificacion INT NOT NULL,
  RazonSocial VARCHAR(35) NOT NULL,
  FechaPago DATE NOT NULL,
  TotalPago FLOAT NOT NULL,
  PRIMARY KEY (IdBoletaPago),
  INDEX fk_BOLETA_DE_PAGO_Pedidos1_idx (idPedido ASC),
  INDEX fk_BOLETA_DE_PAGO_COSMETOLOGA1_idx (NumeroIdentificacionCosmetologa ASC),
  INDEX fk_BOLETAS_DE_PAGO_CENTRO_DE_ESTETICA1_idx (RazonSocial ASC),
  INDEX fk_BOLETAS_DE_PAGO_CLIENTES1_idx (Cliente_NumeroIdentificacion ASC),
  CONSTRAINT fk_BOLETA_DE_PAGO_Pedidos1
    FOREIGN KEY (idPedido)
    REFERENCES PEDIDOS (idPedidos)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT fk_BOLETA_DE_PAGO_COSMETOLOGA1
    FOREIGN KEY (NumeroIdentificacionCosmetologa)
    REFERENCES PROFESIONALES (NumeroIdentificacion)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT fk_BOLETAS_DE_PAGO_CENTRO_DE_ESTETICA1
    FOREIGN KEY (RazonSocial)
    REFERENCES CENTRO_DE_ESTETICA (RazonSocial)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT fk_BOLETAS_DE_PAGO_CLIENTES
    FOREIGN KEY (Cliente_NumeroIdentificacion)
    REFERENCES CLIENTES (NumeroIdentificacion)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);


CREATE TABLE AGENDA (
  IdAgenda INT NOT NULL,
  IdServicio INT NOT NULL,
  NumeroIdentificacionCliente INT NOT NULL,
  NumeroIdentificacionCosmetologa INT NOT NULL,
  Fecha DATE NOT NULL,
  Hora Time NOT NULL,
  IDEstadoAgenda INT NOT NULL,
  PRIMARY KEY (IdAgenda),
  INDEX fk_AGENDA_SERVICIOS1_idx (IdServicio ASC),
  INDEX fk_AGENDA_CLIENTE1_idx (NumeroIdentificacionCliente ASC),
  INDEX fk_AGENDA_COSMETOLOGA1_idx (NumeroIdentificacionCosmetologa ASC),
  CONSTRAINT fk_AGENDA_SERVICIOS1
    FOREIGN KEY (IdServicio)
    REFERENCES SERVICIOS (IdServicio)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT fk_AGENDA_CLIENTE1
    FOREIGN KEY (NumeroIdentificacionCliente)
    REFERENCES CLIENTES (NumeroIdentificacion)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT fk_AGENDA_COSMETOLOGA1
    FOREIGN KEY (NumeroIdentificacionCosmetologa)
    REFERENCES PROFESIONALES (NumeroIdentificacion)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
	CONSTRAINT fk_AGENDA_ESTADOAGENDA1
    FOREIGN KEY (IDEstadoAgenda)
    REFERENCES ESTADO_AGENDA (IDEstadoAgenda)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
	);


CREATE TABLE DETALLE_DE_SERVICIOS (
  IdDetalleServicio INT NOT NULL,
  IdServicio INT NOT NULL,
  IdBoletaPago INT NOT NULL,
  NumeroIdentificacionCliente INT NOT NULL,
  ValorUnitario FLOAT NOT NULL,
  PRIMARY KEY (IdDetalleServicio),
  INDEX fk_DETALLE_DE_SERVICIO_SERVICIOS1_idx (IdServicio ASC),
  INDEX fk_DETALLE_DE_SERVICIOS_BOLETASDEPAGO1_idx (IdBoletaPago ASC),
  INDEX fk_DETALLE_DE_SERVICIOS_CLIENTE_idx (NumeroIdentificacionCliente ASC),
  CONSTRAINT fk_DETALLE_DE_SERVICIO_SERVICIOS1
    FOREIGN KEY (IdServicio)
    REFERENCES SERVICIOS (IdServicio)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT fk_DETALLE_DE_SERVICIO_CLIENTE
    FOREIGN KEY (NumeroIdentificacionCliente)
    REFERENCES CLIENTES (NumeroIdentificacion)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT fk_DETALLE_DE_SERVICIOS_BOLETAS_DE_PAGO1
    FOREIGN KEY (IdBoletaPago)
    REFERENCES BOLETAS_DE_PAGO (IdBoletaPago)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);



CREATE TABLE IMAGENES_DE_SERVICIOS (
  ID INT AUTO_INCREMENT NOT NULL,
  IdServicio INT NOT NULL,
  Imagen BINARY(11) NOT NULL,
  NombreImagen VARCHAR(50) NOT NULL,
  PRIMARY KEY (ID),
  INDEX fk_Imagenes_servicios_SERVICIOS1_idx (IdServicio ASC),
  CONSTRAINT fk_Imagenes_servicios_SERVICIOS1
    FOREIGN KEY (IdServicio)
    REFERENCES SERVICIOS (IdServicio)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);



CREATE TABLE IMAGEN_PRODUCTOS (
  ID INT AUTO_INCREMENT NOT NULL,
  IdProductos INT NOT NULL,
  Imagen BINARY(11) NOT NULL,
  NombreImagen VARCHAR(50) NOT NULL,
  PRIMARY KEY (ID),
  INDEX fk_IMAGEN_PRODUCTO_PRODUCTOS1_idx (IdProductos ASC),
  CONSTRAINT fk_IMAGEN_PRODUCTO_PRODUCTOS1
    FOREIGN KEY (IdProductos)
    REFERENCES PRODUCTOS (IdProductos)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);


CREATE TABLE PERMISOS_ROLES (
  IdPermisoRol INT NOT NULL,
  IdRol INT NOT NULL,
  IdPermiso INT NOT NULL,
  INDEX fk_PERMISOS_has_ROLES_ROLES1_idx (IdRol ASC),
  PRIMARY KEY (IdPermisoRol),
  INDEX fk_PERMISOS_has_ROLES_PERMISOS1_idx (IdPermiso ASC),
  CONSTRAINT fk_PERMISOS_has_ROLES_ROLES1
    FOREIGN KEY (IdRol)
    REFERENCES ROLES (IdRol)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT fk_PERMISOS_has_ROLES_PERMISOS1
    FOREIGN KEY (IdPermiso)
    REFERENCES PERMISOS (IdPermiso)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

CREATE TABLE QUIENES_SOMOS(
	ID int AUTO_INCREMENT not null,
	Mision VARCHAR(500) NOT NULL,
	Vision VARCHAR(400) NOT NULL,
	Quienes VARCHAR(500) NOT NULL,
	PRIMARY KEY (ID)
);

CREATE TABLE CONTACTO(
	ID int AUTO_INCREMENT not null,
	whatsapp VARCHAR(100) NOT NULL,
	Email VARCHAR(40) NOT NULL,
	Instagram VARCHAR(100) NOT NULL,
	Descripcion VARCHAR(250) NULL,
	PRIMARY KEY (ID)
);